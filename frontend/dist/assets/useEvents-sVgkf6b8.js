import{y as D,r as s,h as k,z as v}from"./index-ss9waReM.js";const I=D({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"}),w=(y={})=>{const[d,m]=s.useState([]),[S,u]=s.useState([]),[C,n]=s.useState(!0),[P,g]=s.useState(null),[c,h]=s.useState(y),[i,b]=s.useState({page:1,limit:12,total:0,totalPages:0}),l=k(),f=s.useCallback(async(a=1,e=12,t={})=>{try{n(!0),g(null);const r={page:a,limit:e,...t},o=await v.getAll(r);if(o.success)m(o.data.events),u(o.data.events),b({page:o.data.currentPage,limit:o.data.limit,total:o.data.totalEvents,totalPages:o.data.totalPages});else throw new Error(o.message||"Failed to fetch events")}catch(r){console.error("Error fetching events:",r),g(r.message),l({title:"Error",description:"Failed to load events. Please try again.",status:"error",duration:3e3,isClosable:!0})}finally{n(!1)}},[l]),L=s.useCallback(async a=>{try{n(!0);const e=await v.search(a);if(e.success)u(e.data);else throw new Error(e.message||"Search failed")}catch(e){console.error("Error searching events:",e),g(e.message),l({title:"Search Error",description:"Failed to search events. Please try again.",status:"error",duration:3e3,isClosable:!0})}finally{n(!1)}},[l]),p=s.useCallback(a=>{h(a);let e=d;if(a.category&&(e=e.filter(t=>t.category===a.category)),a.date&&(e=e.filter(t=>{const r=new Date(t.date),o=new Date(a.date);return r.toDateString()===o.toDateString()})),a.search){const t=a.search.toLowerCase();e=e.filter(r=>r.title.toLowerCase().includes(t)||r.description.toLowerCase().includes(t)||r.category.toLowerCase().includes(t))}a.saved&&(e=e.filter(t=>t.isSaved)),a.price&&(a.price==="free"?e=e.filter(t=>t.price==="Free"||!t.price):a.price==="paid"&&(e=e.filter(t=>t.price&&t.price!=="Free"))),a.location&&(e=e.filter(t=>(typeof t.location=="object"?t.location.address:t.location).toLowerCase().includes(a.location.toLowerCase()))),u(e)},[d]),E=s.useCallback(()=>{f(i.page,i.limit,c)},[f,i.page,i.limit,c]);return s.useEffect(()=>{f()},[f]),s.useEffect(()=>{p(c)},[d,c,p]),{events:S,loading:C,error:P,filters:c,pagination:i,setFilters:h,applyFilters:p,searchEvents:L,fetchEvents:E,refetch:E}};export{I as S,w as u};
