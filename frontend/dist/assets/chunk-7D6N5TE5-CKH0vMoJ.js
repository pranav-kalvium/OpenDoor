import{a as me}from"./chunk-6CVSDS6C-Dy3J0IGx.js";import{D as I,r as o,ae as B,af as ye,I as l,a8 as a,K as Z}from"./index-ss9waReM.js";var he={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},pe=()=>typeof document<"u",$=!1,w=null,m=!1,K=!1,R=new Set;function x(e,u){R.forEach(n=>n(e,u))}var ke=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function we(e){return!(e.metaKey||!ke&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function ee(e){m=!0,we(e)&&(w="keyboard",x("keyboard",e))}function h(e){if(w="pointer",e.type==="mousedown"||e.type==="pointerdown"){m=!0;const u=e.composedPath?e.composedPath()[0]:e.target;let n=!1;try{n=u.matches(":focus-visible")}catch{}if(n)return;x("pointer",e)}}function Ee(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function Ce(e){Ee(e)&&(m=!0,w="virtual")}function ge(e){e.target===window||e.target===document||(!m&&!K&&(w="virtual",x("virtual",e)),m=!1,K=!1)}function Le(){m=!1,K=!0}function te(){return w!=="pointer"}function Pe(){if(!pe()||$)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){m=!0,e.apply(this,n)},document.addEventListener("keydown",ee,!0),document.addEventListener("keyup",ee,!0),document.addEventListener("click",Ce,!0),window.addEventListener("focus",ge,!0),window.addEventListener("blur",Le,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",h,!0),document.addEventListener("pointermove",h,!0),document.addEventListener("pointerup",h,!0)):(document.addEventListener("mousedown",h,!0),document.addEventListener("mousemove",h,!0),document.addEventListener("mouseup",h,!0)),$=!0}function Se(e){Pe(),e(te());const u=()=>e(te());return R.add(u),()=>{R.delete(u)}}function De(e,u=[]){const n=Object.assign({},e);for(const s of u)s in n&&delete n[s];return n}function Ke(e={}){const u=me(e),{isDisabled:n,isReadOnly:s,isRequired:P,isInvalid:d,id:A,onBlur:ne,onFocus:ae,"aria-describedby":H}=u,{defaultChecked:U,isChecked:V,isFocusable:oe,onChange:re,isIndeterminate:v,name:q,value:O,tabIndex:T=void 0,"aria-label":W,"aria-labelledby":_,"aria-invalid":S,...se}=e,D=De(se,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),F=I(re),j=I(ne),z=I(ae),[E,ie]=o.useState(!1),[b,C]=o.useState(!1),[p,G]=o.useState(!1),[k,y]=o.useState(!1);o.useEffect(()=>Se(ie),[]);const c=o.useRef(null),[N,ue]=o.useState(!0),[de,g]=o.useState(!!U),M=V!==void 0,r=M?V:de,J=o.useCallback(t=>{if(s||n){t.preventDefault();return}M||g(r?t.target.checked:v?!0:t.target.checked),F?.(t)},[s,n,r,M,v,F]);B(()=>{c.current&&(c.current.indeterminate=!!v)},[v]),ye(()=>{n&&C(!1)},[n,C]),B(()=>{const t=c.current;if(!t?.form)return;const i=()=>{g(!!U)};return t.form.addEventListener("reset",i),()=>{var f;return(f=t.form)==null?void 0:f.removeEventListener("reset",i)}},[]);const Q=n&&!oe,X=o.useCallback(t=>{t.key===" "&&y(!0)},[y]),Y=o.useCallback(t=>{t.key===" "&&y(!1)},[y]);B(()=>{if(!c.current)return;c.current.checked!==r&&g(c.current.checked)},[c.current]);const le=o.useCallback((t={},i=null)=>{const f=L=>{b&&L.preventDefault(),y(!0)};return{...t,ref:i,"data-active":a(k),"data-hover":a(p),"data-checked":a(r),"data-focus":a(b),"data-focus-visible":a(b&&E),"data-indeterminate":a(v),"data-disabled":a(n),"data-invalid":a(d),"data-readonly":a(s),"aria-hidden":!0,onMouseDown:l(t.onMouseDown,f),onMouseUp:l(t.onMouseUp,()=>y(!1)),onMouseEnter:l(t.onMouseEnter,()=>G(!0)),onMouseLeave:l(t.onMouseLeave,()=>G(!1))}},[k,r,n,b,E,p,v,d,s]),ce=o.useCallback((t={},i=null)=>({...t,ref:i,"data-active":a(k),"data-hover":a(p),"data-checked":a(r),"data-focus":a(b),"data-focus-visible":a(b&&E),"data-indeterminate":a(v),"data-disabled":a(n),"data-invalid":a(d),"data-readonly":a(s)}),[k,r,n,b,E,p,v,d,s]),fe=o.useCallback((t={},i=null)=>({...D,...t,ref:Z(i,f=>{f&&ue(f.tagName==="LABEL")}),onClick:l(t.onClick,()=>{var f;N||((f=c.current)==null||f.click(),requestAnimationFrame(()=>{var L;(L=c.current)==null||L.focus({preventScroll:!0})}))}),"data-disabled":a(n),"data-checked":a(r),"data-invalid":a(d)}),[D,n,r,d,N]),ve=o.useCallback((t={},i=null)=>({...t,ref:Z(c,i),type:"checkbox",name:q,value:O,id:A,tabIndex:T,onChange:l(t.onChange,J),onBlur:l(t.onBlur,j,()=>C(!1)),onFocus:l(t.onFocus,z,()=>C(!0)),onKeyDown:l(t.onKeyDown,X),onKeyUp:l(t.onKeyUp,Y),required:P,checked:r,disabled:Q,readOnly:s,"aria-label":W,"aria-labelledby":_,"aria-invalid":S?!!S:d,"aria-describedby":H,"aria-disabled":n,style:he}),[q,O,A,J,j,z,X,Y,P,r,Q,s,W,_,S,d,H,n,T]),be=o.useCallback((t={},i=null)=>({...t,ref:i,onMouseDown:l(t.onMouseDown,Fe),"data-disabled":a(n),"data-checked":a(r),"data-invalid":a(d)}),[r,n,d]);return{state:{isInvalid:d,isFocused:b,isChecked:r,isActive:k,isHovered:p,isIndeterminate:v,isDisabled:n,isReadOnly:s,isRequired:P},getRootProps:fe,getCheckboxProps:le,getIndicatorProps:ce,getInputProps:ve,getLabelProps:be,htmlProps:D}}function Fe(e){e.preventDefault(),e.stopPropagation()}export{Ke as u};
