import{r as w,g as N,j as e,A as H,m as R,c as M,w as _,T as G,u as L,a as U,f as q,b as z,d as Q,e as V,h as Y,C as E,B as C,H as k,i as S,k as m,R as $,F as J,l as K}from"./index-ss9waReM.js";import{M as X,u as Z,a as ee,b as te,H as se,E as re,c as ae,d as ne,e as oe,f as ie}from"./EventCard-CeUDMkr1.js";import{u as le,S as ce}from"./useEvents-sVgkf6b8.js";import{I as de,a as he}from"./chunk-2ZHRCML3-9N-jao-J.js";import{I as F}from"./chunk-6CVSDS6C-Dy3J0IGx.js";import{V as ue}from"./chunk-NTCQBYKE-BvdzEZQw.js";import{S as ge}from"./chunk-3RSXBRAN-B5SjoL6d.js";import"./chunk-YQO7BFFX-DXBAi4uT.js";var P={exit:{duration:.15,ease:G.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},xe={exit:({direction:i,transition:r,transitionEnd:a,delay:n})=>{var c;const{exit:l}=N({direction:i});return{...l,transition:(c=r?.exit)!=null?c:_.exit(P.exit,n),transitionEnd:a?.exit}},enter:({direction:i,transitionEnd:r,transition:a,delay:n})=>{var c;const{enter:l}=N({direction:i});return{...l,transition:(c=a?.enter)!=null?c:_.enter(P.enter,n),transitionEnd:r?.enter}}},I=w.forwardRef(function(r,a){const{direction:n="right",style:c,unmountOnExit:l,in:u,className:g,transition:x,transitionEnd:h,delay:v,motionProps:p,...t}=r,d=N({direction:n}),y=Object.assign({position:"fixed"},d.position,c),j=l?u&&l:!0,f=u||l?"enter":"exit",A={transitionEnd:h,transition:x,direction:n,delay:v};return e.jsx(H,{custom:A,children:j&&e.jsx(R.div,{...t,ref:a,initial:"exit",className:M("chakra-slide",g),animate:f,exit:"exit",custom:A,variants:xe,style:y,...p})})});I.displayName="Slide";var[me,pe]=U(),ve={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function ye(i,r){var a,n;if(i)return(n=(a=ve[i])==null?void 0:a[r])!=null?n:i}function je(i){var r;const{isOpen:a,onClose:n,placement:c="right",children:l,...u}=i,g=L(),x=(r=g.components)==null?void 0:r.Drawer,h=ye(c,g.direction);return e.jsx(me,{value:{placement:h},children:e.jsx(X,{isOpen:a,onClose:n,styleConfig:x,...u,children:l})})}var fe=z(I),O=q((i,r)=>{const{className:a,children:n,motionProps:c,containerProps:l,...u}=i,{getDialogProps:g,getDialogContainerProps:x,isOpen:h}=Z(),v=g(u,r),p=x(l),t=M("chakra-modal__content",a),d=ee(),y={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...d.dialog},j={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...d.dialogContainer},{placement:f}=pe();return e.jsx(te,{children:e.jsx(z.div,{...p,className:"chakra-modal__content-container",__css:j,children:e.jsx(fe,{motionProps:c,direction:f,in:h,className:t,...v,__css:y,children:n})})})});O.displayName="DrawerContent";const Ee=()=>{const[i,r]=w.useState(""),[a,n]=w.useState(""),[c,l]=w.useState(""),{isOpen:u,onOpen:g,onClose:x}=Q(),{events:h,loading:v,error:p,filters:t,setFilters:d}=le(),{isAuthenticated:y}=V(),j=Y(),f=w.useMemo(()=>{const s=new Set;return h.forEach(o=>{o.category&&s.add(o.category)}),Array.from(s)},[h]),A=s=>{const o=s.target.value;r(o),d(b=>({...b,search:o}))},T=s=>{const o=s.target.value;n(o),d(b=>({...b,category:o||void 0}))},B=s=>{const o=s.target.value;l(o),d(b=>({...b,date:o||void 0}))},D=()=>{r(""),n(""),l(""),d({})},W=()=>{y||j({title:"Please login",description:"You need to be logged in to save events",status:"warning",duration:3e3,isClosable:!0})};return p?e.jsx(E,{maxW:"container.xl",py:8,children:e.jsxs(C,{textAlign:"center",py:10,children:[e.jsx(k,{size:"lg",mb:4,children:"Error Loading Events"}),e.jsx(S,{color:"gray.400",children:p}),e.jsx(m,{mt:4,colorScheme:"blue",onClick:()=>window.location.reload(),children:"Try Again"})]})}):($.useEffect(()=>{d(s=>({...s,limit:25}))},[d]),e.jsxs(E,{maxW:"container.xl",py:8,children:[e.jsxs(C,{textAlign:"center",mb:12,children:[e.jsx(k,{size:"2xl",mb:4,bgGradient:"linear(to-r, blue.400, purple.500)",bgClip:"text",children:"Discover Amazing Events"}),e.jsx(S,{fontSize:"xl",color:"gray.400",maxW:"2xl",mx:"auto",children:"Find and attend the best events in Alliance University,Benguluru. From academic conferences to social gatherings, we've got you covered."})]}),e.jsxs(C,{mb:8,children:[e.jsxs(J,{direction:{base:"column",md:"row"},gap:4,mb:6,children:[e.jsxs(de,{size:"lg",flex:"1",children:[e.jsx(he,{pointerEvents:"none",children:e.jsx(ce,{color:"gray.400"})}),e.jsx(F,{placeholder:"Search events...",value:i,onChange:A,bg:"whiteAlpha.100",borderColor:"whiteAlpha.200",_hover:{borderColor:"whiteAlpha.300"},_focus:{borderColor:"blue.500",boxShadow:"0 0 0 1px blue.500"}})]}),e.jsx(m,{leftIcon:e.jsx(K,{}),onClick:g,size:"lg",variant:"outline",borderColor:"whiteAlpha.200",_hover:{bg:"whiteAlpha.100"},children:"Filters"})]}),(t.category||t.date||t.search)&&e.jsxs(se,{mb:4,spacing:3,flexWrap:"wrap",children:[e.jsx(S,{fontSize:"sm",color:"gray.400",children:"Active filters:"}),t.search&&e.jsxs(m,{size:"sm",variant:"outline",colorScheme:"blue",children:["Search: ",t.search]}),t.category&&e.jsxs(m,{size:"sm",variant:"outline",colorScheme:"green",children:["Category: ",t.category]}),t.date&&e.jsxs(m,{size:"sm",variant:"outline",colorScheme:"purple",children:["Date: ",new Date(t.date).toLocaleDateString()]}),e.jsx(m,{size:"sm",variant:"ghost",onClick:D,children:"Clear all"})]})]}),v?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,o)=>e.jsx("div",{className:"animate-pulse bg-gray-300 rounded-lg h-96"},o))}):h.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((s,o)=>e.jsx(re,{event:s,onEventUpdate:W,className:"bg-white rounded-lg shadow-md p-6 text-white-900"},s._id||o))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"No events found"}),e.jsx("p",{className:"text-gray-600",children:t.search||t.category||t.date?"Try adjusting your filters to see more results.":"Check back later for new events!"}),(t.search||t.category||t.date)&&e.jsx("button",{onClick:D,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Clear Filters"})]}),e.jsxs(je,{isOpen:u,placement:"right",onClose:x,children:[e.jsx(ae,{}),e.jsxs(O,{bg:"gray.800",children:[e.jsx(ne,{}),e.jsx(oe,{borderBottomWidth:"1px",children:"Filter Events"}),e.jsx(ie,{children:e.jsxs(ue,{spacing:4,align:"stretch",py:4,children:[e.jsxs(C,{children:[e.jsx(S,{mb:2,fontWeight:"medium",children:"Category"}),e.jsx(ge,{placeholder:"All categories",value:a,onChange:T,bg:"whiteAlpha.100",borderColor:"whiteAlpha.200",children:f.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs(C,{children:[e.jsx(S,{mb:2,fontWeight:"medium",children:"Date"}),e.jsx(F,{type:"date",value:c,onChange:B,bg:"whiteAlpha.100",borderColor:"whiteAlpha.200"})]}),e.jsx(m,{onClick:D,variant:"outline",mt:4,children:"Clear Filters"})]})})]})]})]}))};export{Ee as default};
